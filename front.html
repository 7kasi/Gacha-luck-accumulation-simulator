<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ガチャシミュレーター</title>
</head>
<body>
    <h1>ガチャを回す</h1>
    <label for="patternSelect">確率パターンを選択：</label>
    <select id="patternSelect"></select>
    <button id="gachaButton">ガチャを回す</button>
    <button id="resetButton">ガチャ結果をリセット</button>
    <p id="result"></p>
    <h2>過去のガチャ結果</h2>
    <ul id="history"></ul>

    <h2>確率パターンを設定</h2>
    <label for="patternName">パターン名：</label>
    <input type="text" id="patternName" />
    <label for="ssrProb">SSR確率：</label>
    <input type="number" id="ssrProb" step="0.01" />
    <label for="srProb">SR確率：</label>
    <input type="number" id="srProb" step="0.01" />
    <label for="rProb">R確率：</label>
    <input type="number" id="rProb" step="0.01" />
    <label for="nProb">N確率：</label>
    <input type="number" id="nProb" step="0.01" />
    <button id="savePatternButton">パターンを保存</button>

    <script>
        function saveGachaResult(result) {
            let gachaResults = JSON.parse(localStorage.getItem('gachaResults')) || [];
            gachaResults.push(result);
            localStorage.setItem('gachaResults', JSON.stringify(gachaResults));
        }

        function gacha() {
            const patternSelect = document.getElementById('patternSelect');
            const selectedPattern = JSON.parse(patternSelect.value);
            const { ssr, sr, r, n } = selectedPattern;
            const random = Math.random() * 100;

            let result;
            if (random < ssr) {
                result = 'SSR';
            } else if (random < ssr + sr) {
                result = 'SR';
            } else if (random < ssr + sr + r) {
                result = 'R';
            } else {
                result = 'N';
            }

            saveGachaResult(result);
            document.getElementById('result').textContent = `結果: ${result}`;
            displayHistory();
        }

        function displayHistory() {
            const gachaResults = JSON.parse(localStorage.getItem('gachaResults')) || [];
            const historyElement = document.getElementById('history');
            historyElement.innerHTML = '';
            gachaResults.forEach(result => {
                const li = document.createElement('li');
                li.textContent = result;
                historyElement.appendChild(li);
            });
        }

        function savePattern() {
            const patternName = document.getElementById('patternName').value;
            const ssrProb = parseFloat(document.getElementById('ssrProb').value);
            const srProb = parseFloat(document.getElementById('srProb').value);
            const rProb = parseFloat(document.getElementById('rProb').value);
            const nProb = parseFloat(document.getElementById('nProb').value);

            const newPattern = {
                name: patternName,
                ssr: ssrProb,
                sr: srProb,
                r: rProb,
                n: nProb
            };

            let patterns = JSON.parse(localStorage.getItem('gachaPatterns')) || [];
            patterns.push(newPattern);
            localStorage.setItem('gachaPatterns', JSON.stringify(patterns));

            loadPatterns();
        }

        function loadPatterns() {
            const patterns = JSON.parse(localStorage.getItem('gachaPatterns')) || [];
            const patternSelect = document.getElementById('patternSelect');
            patternSelect.innerHTML = '';

            patterns.forEach(pattern => {
                const option = document.createElement('option');
                option.value = JSON.stringify(pattern);
                option.textContent = pattern.name;
                patternSelect.appendChild(option);
            });
        }

        function resetGachaResults() {
            localStorage.removeItem('gachaResults');
            document.getElementById('result').textContent = '';
            displayHistory();
        }

        document.addEventらе:
}
document.getElementById('savePatternButton').addEventListener('click', savePattern);
document.getElementById('resetButton').addEventListener('click', resetGachaResults);
</script>
</body>
</html>
